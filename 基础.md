# 基础

Swift 是一门用于开发iOS，macOS，watchOS和tvOS app的新语言。既然如此，Swift中很多地方都和你开发 C 和 Objective-C 的经验很像。

Swift提供了所有C和Objective-C的基本类型，包括整型`Int`，浮点型`Double`和`Float`，布尔型`Bool`和字符串`String`。 Swift 也提供了三种主要的集合类型包括：`Array`、`Set`、`Dictionary`。

和 C 一样， Swift 通过变量名字来存储和引用值。Swift 还广泛使用其值不能更改的变量。它们被称为常量，比 C 里面的常量更强大。当使用不需要改变的值时，Swift会使用常量来使代码更安全、更清晰。

出了熟悉的类型之外，Swift 包含Objective-C中没有的类型，比如元组。元祖能让你创建和传递一组值。使用元祖可以把多个值作为一个复合值返回。

Swift 也介绍了可选值，用来处理空值。可选的意思就是要么有值，要么是空。使用可选和在Objective-C中使用空指针一样，但它们可以指向任何类型，不仅仅是类。和空指针相比可选不仅更安全、更容易理解，而且它们是Swift许多强大特性的核心。

Swift是类型安全的语言，意味着这个语言能帮助你清楚代码可以使用的值的类型。如果你代码的某个部分需要一个`String`，那么类型安全为阻止你错误地传一个`Int`给它。同样，类型安全可以阻止你意外将可选字符串传递给一个非可选字符串。在开发中，类型安全能尽可能早的帮你捕获和修复错误。

### 常量和变量
常量和变量把名字（比如`maximunNumberOfLoginAttempts or welcomeMessage`） 和一个具体类型的值（比如数字10或者字符串"hello"）关联起来。常量值一旦设置就不能修改，而变量能设置不同的值。

#####声明常量和变量

常量和变量必须先声明后使用。用`let`关键字来声明常量，`var`关键字来声明变量。下面是个例子，说明如何使用常量和变量来跟踪用户进行登录的尝试次数：
```
let maximunNumberOfLoginAttempts = 10
var currentLoginAttempt = 0
```
这个代码可以这样解读：

声明一个新的常量叫做`maximumNumberOfLoginAttemps`，把10赋值给它。然后，声明一个新的变量叫做`currentLoginAttempt`，给它一个初始值0。

在这个例子中，允许试图登录的最大次数被声明为一个常量，因为这个最大的次数不会改变。当前尝试登录的次数统计被声明为一个变量，因为这个值，每登录失败一次都会增加。

可以在一行中声明多个变量或者常量，用`,`分隔：
```
var x = 0.0, y = 0.0, z = 0.0
```
注意：
如果一个值被存储之后不会改变，总是用`let`关键字将其声明为常量。必须是需要改变的值，才使用变量来存储。

##### 类型注释

在声明一个变量或常量的时候可以提供一个类型注释，清楚的知道这个常量和变量能存储哪种类型。类型注释写在常量或者变量名后面,接一个`:`、一个空格和要使用的类型名。

这个例子展示了一个被叫做`welcomeMessage`的变量使用类型注释，来指明这个变量可以储存`String`类型的值：
```
var welcomeMessage: String
```
声明中分号的意思是...是...类型，所以这个代码可以解读为：
"声明了一个`String`类型，叫做`welcomeMessage`的变量"

"of type String"的意思是"能储存任何字符串"。认为它是指可以存储的"东西的类型"（或"东西的种类"）。

现在`welcomeMessage`变量能设置任何字符串值不会报错：
```
welcomeMessage = "Hello"
```
可以在同一行定义类型相同的相关变量，以`,`分隔，在这一行所有变量名的最后加上类型注释：
```
var red,green,blue: Double
```

注意
在实践中，很少需要写类型注释。如类型安全和类型推断所述，如果在定义常量或者变量的时候给一个初始值，Swift几乎能推断出这个常量或者变量的类型。在上述`welcomeMessage`例子中，没有提供初始值，因此，使用类型注释指定`welcomeMessage`变量的类型，而不是从初始值推断。

#####常量和变量的命名

常量和变量的命名几乎可以包含所有字符，包括`Unicode`字符：
```
let π = 3.14159
let 你好 = "你好世界"
let 🐶🐮 = "dogcow"
```
常量和变量的命名不可以包含空格、数学符号、箭头、私有（或无效）的Unicode代码点、插图或框图。也不能用数字开头，虽然名字中其他地方可以包含数字。

一旦声明了一个确定类型的常量或者变量，就不能再次用同样的名字来声明，也不能把其他类型的值赋给它。也不能把常量赋值给变量或者把变量赋值给常量。

注意
如果你需要给常量或变量一个跟`Swift`关键字相同的名称，用括号把关键字包起来。然后，避免使用关键字来命名除非你别无选择。

可以将现有变量的值改为兼容类型的另一个值。在这个例子中，`friendlyWelcome`的值从"Hello!"改为"Bonjour!"：
```
var friendlyWelcome = "Hello!"
friendlyWelcome = "Bonjour!"
// friendlyWelcome 现在是 "Bonjour!"
```
和变量不一样，常量的值一旦设置就不能修改。试图修改的话，编译器会报错：
```
let languageName = "Swift"
languageName = "Swift++"
// 编译报错：languageName 不能被改变
```

#####打印常量和变量

用`print(_:separator:terminator:)`函数来打印常量或者变量的值。
```
print(friendlyWelcome)
// 答应出 "Bonjour!"
```
`print(_:separator:terminator:)`这个函数是一个可以打印一个或多个值到恰当的输出的全局函数。例如，在Xcode中，`print(_:separator:terminator:)`函数会把它们打印在Xcode的控制台。`separator`和`terminator`参数有默认值，所以当调用这个函数时可以忽略它们。默认情况下，该函数通过添加换行符终止其打印的行。要打印没有换行符的值，请传递一个空字符串作为终止符。例如，`print(someValue,terminator:"")`。更多关于参与默认值的信息，请看`默认参数值`。

在一个长的字符串中，Swift使用字符串插值将常量或变量的名称作为占位符，Swift用常量和变量当前的值来代替它。用括号把名字包起来，在圆括号前面用反斜杠转义它：
```
print("The current value of friendlyWelcome is \(friendlyWelcome)")
```
注意
可以使用`String Interpolation`中描述的所有选项来插入。

#####注释

使用注释来包括你代码中不执行的文本，或者作为一个笔记来提示自己。当你的代码编译时，Swift编译器会忽略被注释的地方。

Swift中注释的使用和C差不多。单行注释用两个斜杠（//）：
```
This is a comment.
```
在/*...*/中写多行注释。
```
/*	This is also a comment
but is written over multiple lines.*/
```
不像C的多行注释，Swift中的多行注释可以嵌套。嵌套在多行注释里面的多行注释需要是封闭的：
```
/* This is the start of the first multiline comment.
/* This is the second, nested multiline comment.*/
This is the end of first multiline comment.*/
```
嵌套的多行注释使您能够快速轻松地注释掉大块代码，即使该代码已经包含多行注释。

#####分号

不同于其他语言，Swfit不要求在每条代码后面写分号(;)，虽然你可以这样做，如果你想。然后，你把多条语句写在同一行的话，没一条语句后面必须叫分号。
```
let cat = "cat";print(cat)
```

#####整型

整型就是没有小数部分的整数，例如42和-23.整型要么是有符号的（正数、负数、零），要么是无符号的（正数和零）。

Swift提供8位、16位、32位和64位的有符号和无符号整型。这些整型的命名习惯和C一样，8位的无符号整型叫`UInt8`，32位的有符号整型叫`Int32`。和Swift中所有类型一样，这些整型有一个主要的名称。

######整型范围

你可以用每一个整型的`min`和`max`属性中获取其最大值和最小值。
```
let minValue = UInt8.min	// 最小值是0
let maxValue = UInt8.max	// 最大值是255
```

######Int

在大部分实例中，你不需要在代码中明确地获取整型的大小。Swift提供了额外的整型`Int`，它与当前平台的本地字大小具有相同的大小。
1. 在32位的平台上，`Int`和`Int32`的大小一样
2. 在64位的平台上，`Int`和`Int64`的大小一样

除非需要指定整型的大小，不然在代码中总是使用`Int`来表示整型。这有助于代码的一致性和互操作性。即使在32位的平台，`Int`可以存储-2147483648到2147483647之间的任何值，对于许多整数范围来说足够大。

######UInt

Swift也提供了一个无符号类型，`UInt`，同样与当前平台的本地字大小具有相同的大小：
1. 在32位的平台上，`UInt`和`UInt32`的大小一样
2. 在64位的平台上，`UInt`和`UInt64`的大小一样

注意
只有当你特别需要与平台原生字大小相同的无符号整型时，才使用`UInt`。如果不是这样的话，`Int`是首选的，即使已经知道要存储的值是非负数。`Int`对于整数值的一致性使用有助于代码互操作性，避免需要在不同数字类型之间进行转换，匹配整数类型推断，详情关注`Type Safety and Type Inference`。

#####浮点数

浮点数就是有分数分量的数，如比3.14159和-273.15。

浮点类型能表现比整型更大的范围，可以存储比整型更大或者更小的数。Swift提供两个带符号的浮点数类型：
1. `Double`表示64位的浮点数
2. `Float`表示42位的浮点数

注意
`Double`至少可以精确到小数点后15位，`Float`可以精确到6位。使用适当的浮点类型取决于你需要在代码中使用的值的性质和范围。在任何一种类型都合适的情况下，首选`Double`。

#####类型安全和类型推断

Swift是类型安全的语言。类型安全的语言能让你清楚代码可以使用的值的类型。如果代码需要一个字符串，你不能传一个整型给它，会报错。

因为Swift是类型安全的，它在编译时执行类型检查，并将任何不匹配的类型标记为错误。让你在开发过程中尽可能早的捕获和修复错误。

当你处理两种不同类型的值的时候，类型检查能帮助你避免错误。但是，这并不意味着你必须在声明的时候确定常量和变量的类型。如果没有指定所需值的类型，Swift使用类型推断来计算出适当的类型。类型推断让编译器在代码编译时自动地推断出特定表达式的类型，只需检测你提供的值即可。

由于类型推断，Swift需要比C或Objective-C等语言少得多的类型声明。常量和变量仍然是明确的类型，但指定其类型的大部分工作都是为你完成的。

当你声明一个常量或变量并带有初始值时，类型推断很有用。这通常是在你声明它的时候，为常量或变量分配一个文字值(或文字)来完成的。字面值是直接显示在源代码中的值，例如下面示例中的42和3.14159。

例如，如果你给一个常量赋值42，Swift推断你想要一个整形常量，因为你初始化了它，并且给了一个看起来像整型的数字。
```
let meaningOfLife = 42
```

另外，如果你没有特别指出浮点类型，Swift推断中你想要创建一个`Double`：
```
let pi = 3.14159
```
Swift总是选择`Double`（而不是`Float`），当推断出类型是浮点型的数字时。

如果你的表达式是一个整型和一个浮点型的组合，将会从上下文中推断出`Double`类型：
```
let anotherPi = 3 + 0.14159
```

3的字面值本身没有明确的类型，因此，作为添加的一部分，从浮点文字的存在推断出适当的输出类型`Double`。

#####数字字面量

整型字面量能被写做：

* 十进制数字，没有前缀
* 二进制数字，前缀是`0b`
* 八进制数字，前缀是`0o`
* 十六进制数字，前缀是`0x`

所有这些整型字面量的十进制为17：
```
let decimalInteger = 17
let binaryInteger = 0b10001
let octalInteger = 0o21
let hexadecimalInteger = 0x11
```
浮点数字面量可以是十进制(没有前缀)，或者十六进制(前缀是0x)。它们必须始终在小数点两边都有一个数字（或十六进制数字）。十进制浮点也可以有一个可选的指数，用大写或小叶`e`表示；十六进制浮点数必须有指数，以大写或者小写p表示。

对于指数为exp的十进制数，基数乘以10^exp：

* 1.25e2 意思是 1.25 * 10^2，或者 125.0。
* 1.25e-2 意思是 1.25 * 10^-2，或者 0.0125。

对于指数为exp的十六进制数，基数乘以2^exp：

* 0xFp2 意思是 15*2^2，或者60.0。
* 0xFp2 意思是 15*2^-2，或者3.75。 

所有这些浮点数字面量的十进制为12.1875：
```
let decimalDouble = 12.1875
let exponentDouble = 1.21875e1
let hexadecimalDouble = 0xC.3p0
```
数字字面量能包含额外的格式来让它们更容易被理解。这两个整数和浮点数可以用额外的零填充，并且可以包含下划线以帮助可读性。类型的格式不会影响文字的值：
```
let paddedDouble = 000123.456
let oneMillion = 1_000_000
let justOverOneMillion = 1_000_000.000_000_1
```

#####数字类型转换

在代码中所有的一般类型的整型常量和变量使用`Int`型，即使已知它们是非负的。在日常情况下使用默认整型类型意味着整型常量和变量可以立即在代码中互操作，并将匹配整数文字值的推断类型。

仅仅当手头任务特别需要时使用其他整型，比如外部数据明确的大小或者性能、内存使用、其他必须的优化。在这些情况下，使用显式大小的类型有助于捕获任何意外的值溢出，并隐式记录正在使用的数据的性质。




