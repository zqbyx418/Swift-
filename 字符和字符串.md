# 字符串和字符

一系列字符组成字符串，比如"hello, world"或者"albatross"。Swift字符串类型表示字符串。可以以各种方式访问字符串的内容，包括作为字符值集合。

Swift的字符串和字符类型提供了一个快速的符合Unicode标准的方式来处理代码中的文本。字符串创建和操作的语法是轻量级和可读的，字符串字面量语法和C很像。字符串连接类似于将两个字符串与`+`运算符组合起来，字符串可变性通过选择常量或者变量来进行管理，就像Swift中的任何其他值一样。在被称为字符串插值的过程中，也可以用字符串将常量、变量、文字和表达式插入到更长的字符串中。这样可以轻松创建用于显示、存储和打印的自定义字符串。

尽管语法简单，Swift的字符串类型是一个快速的，现代的字符串实现。每个字符串由独立于编码的Unicode字符组成，并支持在各种Unicode表示中访问这些字符。

注意
Swift的字符串类型桥接在Foundation的NSString类上。Foundation还以公开NSString定义的方式扩展了字符串。这意味着，如果导入Foundation，可以在String上使用NSString的方法。更多关于在Foundation和Cocoa中使用String的，参考 Working with Cocoa Data Types in Using Swift with Cocoa and Objective-C (Swift 4)

#####字符串文字

可以在代码中将预定义的String值作为字符串文字包含。一个字符串文字是一堆被双引号(")包起来的字符。

使用字符串文字作为常量或变量的初始值：
```
let someString = "Some string literal value"
```
注意Swift推断`someString`常量的类型是字符串类型，因为它初始化的时候被赋予一个字符串文字的值。

注意
关于使用字符串文字中特殊符号使用的信息，参考字符串文字中的特殊符号。

如果一个字符串需要多行，使用多行字符串文字。一个多行字符串文字是被三个双引号包起来的字符序列：
```
let quotation = """
The White Rabbit put on his spectacles.  "Where shall I begin,
please your Majesty?" he asked.

"Begin at the beginning," the King said gravely, "and go on
till you come to the end; then stop."
"""
```
因为多行格式使用三个双引号而不是仅一个，所以可以在多行字符串文字中包含一个双引号(")，如上面的示例所示。想要在多行字符串中包括一个文字"""，必须使用反斜杠(\)来转义至少一个引号，例如：
```
let threeDoubleQuotes = """
Escaping the first quote \"""
Escaping all three quotes \"\"\"
"""
```
更多关于字符串中转义符号用法的更多信息，参考字符串文字中的特殊字符。

在多行结构中，字符串文字包括了开头引号和结束引号中全部的行。字符串的第一行在开头(""")的之后，最后一行在结束的(""")之前，意味着引用不会以换行开始或结束。以下两个字符串相同：
```
let singleLineString = "These are the same."
let multilineString = """
These are the same.
"""
```
要使用换行符开始或结束的多行字符串文字，请将空行写为第一行或最后一行。例如：
```
"""

This string starts with a line feed.
It also ends with a line feed.

"""
```
多行字符串能缩进以匹配周围的代码。结束引号(""")前面的空格告诉Swift忽略在所有其他行之前的空格。例如，即使下面函数中的多行字符串文字缩进，实际字符串中的行也不会以任何空格开头。
```
func generateQuotation() -> String {
    let quotation = """
        The White Rabbit put on his spectacles. "Where shall I begin,
        please your Majesty?" he asked.
        
        	"Begin at the beginning," the King said gravely, "and go on
		   till you come to the end; then stop."
			"""
		return quotation
}
print(quotation == generateQuotaion())
```
然而，如果在一行的开头出写入空格，出了结束引号(""")之前，还包括该空格。

##### 初始化和空字符串

创建一个空的字符串值作为构建一个更长的字符串的起始点，可以给一个变量赋一个空的文字值，也可以用构造器语法实例化一个新的字符串：
```
var emptyString = ""
var anotherEmptyString = String()
```
通过`isEmpty`属性来检查一个字符串是否为空：
```
if emptyString.isEmpty {
    print("Nothing to see here")
}
```

#####字符串的可变性

你可以通过将字符串赋值给一个变量或者常量来指明一个特定的字符串是否能被修改：
```
var variableString = "Horse"
variableString += " and carriage "

let constantString = "Highlander"
constantString += " and another Highlander"
```
注意
在Objective-C 和 Cocoa中，想要字符串可变的方式与这个不一样，通过选择NSString类或者NNSMutableString类来指明是否可变。

#####字符串是值类型

Swift的字符串类型是值类型。如果创建一个新的字符串值，在函数或者方法中，或者当它赋值给一个常量或变量的时候，字符串的值会被复制。在每种情况下，将创建现有String值的新副本，并且新副本将被传递或分配，而不是原始版本。值类型的描述，参考结构体和枚举是值类型。

Swift的字符串默认复制行为确保当一个函数或方法传递字符串值时，很明显拥有这个确切的字符串值，不管它来自哪里。可以确信，传递的字符串将不会被修改，除非你自己修改。

幕后，Swift的编译器优化字符串使用情况，以便仅在绝对必要时进行实际复制。这意味着当使用字符串作为值类型时，总是获得很好的性能。

#####字符使用

可以通过`for-in`遍历字符串获取单个字符值：
```
for character in "Dog!" {
    print(character)
}
```
`for-in`的详情，参考 For-in 循环。

另外，通过`Character`类型的注解，可以用单个字符的字面量值来创建一个独立的`Character`常量或变量：
```
let exclamationMark: Character = "!"
```
可以通过字符类型的数组来创建字符串：
```
let catCharacters: [Character] = ["C","a","t","i"]
let catString = String(catCharacters)
print(catString)
// 打印 "Cat!"
```

#####串联字符串和字符

字符串值可以用加法运算符(+)加到一起，创建一个新的字符串值：
```
let string1 = "hello"
let string2 = "there"
var welcome = string1 + string2
// 现在 welcome 等于 "hello there"
```

也可以通过(+=)把一个字符串拼接在一个已经存在的字符串后面：
```
var instruction = "look over"
instruction += string2
// 现在 instruction 等于 "look over there"
```

用字符串的`append()`方法，可以把一个字符类型的值添加到字符串后面：
```
let exclamationMark: Character = "!"
welcome.append(exclamationMark)
// 现在 welcome 等于 "hello there!"
```

注意
不能添加字符串和字符到一个已经存在的字符变量后面，因为字符值仅仅只能包含单个字符。

#####字符串插值

字符串插值是用混合的常量、变量、文本和表达式的值来构建一个新字符串的方法。可以在单行和多行字符串文字中使用字符串插值。插入到这个字符串文本的每一项文字都是装到括号中的，并在括号前面加一个反斜线(\)：
```
let multiplier = 3
let message = "\(multiplier) times 2.5s is \(Double(multiplier) * 2.5)"
// message 是 "3 times 2.5 is 7.5"
```
在上述例子中，multiplier的值以\(multiplier)的形式插到字符串文本中。当判断字符串插值以创建实际字符串时，该占位符将替代为`multiplier`的实际值。

multiplier的值也将成为字符串中的较大表达式的一部分。这个表达式计算出`Double(multiplier) * 2.5`的值并把结果(7.5)插入到字符串中。在这种情况下，当它包含在字符串文字内的时候，表达式被写作`\(Double(multiplier) * 2.5)`

注意
在内插字符串中的括号内写的表达式不能包含未转义的反斜杠`(\)`、回车符或换行符。但是，他们可以包含其他的字符串文字。

#####Unicode

Unicode是用于编码，表示和处理不同书写系统中的文本的国际标准。它能以标准化形式表示任何语言的任何字符，并将这些字符读取和写入外部来源（例如文本文件或网页）。Swift的字符串和字符类型完全符合Unicode编码标准。

#####Unicode标量

幕后，Swift的原生字符串类型是由Unicode标量值构建的。字符或修饰符的Unicode标量是的唯一的21位数字，例如`LATIN SMALL LETTER A("a")`的`U+0061`或者`FRONT_FACING BABY CHICK("🐥")`的`U+1F426`

注意
Unicode标量是包括`U+0000`到`U+D7FF`或者包括`U+E000`到`U+10FFFF`范围的任何Unicode代码点。Unicode标量不包括Unicode代理对代码点，它们是`U+D800`到`U+DFFF`范围内的代码点。

注意不是所有的21为Unicode标量都能赋值给字符，一些标量是为了将来分配而保留的。分配给字符的标量通常也有一个名称，例如上面例子中的`LATIN SMALL LETTER A` 和 `FRONT-FACING BABY CHICK`。

######字符串文字中的特殊字符

字符串文字能包括以下特殊字符：

* 转义的特殊字符`\0`(空字符)，`\\`(反斜杠)，`\t`(水平tab)，`\n`(换行)，`\r`(回车)，`\"`(双引号)，`\'`(单引号)。
* 任意的Unicode标量，写为`\u{n}`，其中n是1-8位十六进制数字，其值等于有效的Unicode代码点。

下面是四个特殊字符展示的例子。`wiseWords`常量包含两个双引号字符。`dollarSign`,`blackHeart`和`sparklingHeart`常量演示Unicode标量格式：
```
let wiseWords = "\"Imgaination is more important than knowledge\" - Einstein"
let dollarSign = "\u{24}"
let blackHeart = "\u{2665}"
let sparklingHeart = "\u{1F496}"
```

######扩展字形集群

Swift的字符类型的每一个实例都代表一个单一的扩展的字形集合。扩展的字形集合是由一个或多个Unicode标量的序列（当组合时）产生单个人类可读字符。

例如。字母`é`表示为单个Unicode标量`é`(LATIN SMALL LETTER E WITH ACUTE, 或 U+00E9)。但是，相同的字母也可以表示为一对标量——标准字母e（LATIN SMALL LETTER E, 或 U+0065），后跟组合ACUTE ACCENT标量(U+0301)。组合ACUTE ACCENT标量图形应用与其前的标量，当由Unicode感知的文本呈现系统呈现时，将e转换为é。

在这两种情况下，字母é表示为单个Swift字符值，表示扩展的图形集合。在第一种情况下，句群包含单个标量；在第二种情况下，它是两个标量的集群：
```
let eAcute: Character = "\u{E9}"                         
let combinedEAcute: Character = "\u{65}\u{301}" 
```
扩展的图形集合是将许多复杂的脚本字符表示为单个字符值的灵活方式。 例如，来自韩文字母表的韩文字母可以表示为预先设置的或分解的序列。 这两种表示符合Swift中的单个字符值：
```
let precomposed: Character = "\u{D55C}" 
let decomposed: Character = "\u{1112}\u{1161}\u{11AB}"
```
扩展的图形集群使包含标记的标量（如组合封装圆或U + 20DD）可以将其他Unicode标量作为单个字符值的一部分：
```
let enclosedEAcute: Character = "\u{E9}\u{20DD}"
```
用于区域指示符符号的Unicode标量可以成对组合以形成单个字符值，例如区域指示符符号U（U + 1F1FA）和区域指示符符号S（U + 1F1F8）的组合：
```
let regionalIndicatorForUS: Character = "\u{1F1FA}\u{1F1F8}"
```

#####字符计数




